(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t){function c(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}c.keys=function(){return[]},c.resolve=c,e.exports=c,c.id=25},32:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),o=c(15),a=c.n(o);c(24);var i=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,33)).then((({getCLS:t,getFID:c,getFCP:n,getLCP:r,getTTFB:o})=>{t(e),c(e),n(e),r(e),o(e)}))},s=c(19),l=c(1),d=c(16),p=c.n(d),u=c(17),j=c.n(u);let O;!function(e){e.Ex="x",e.Circle="o"}(O||(O={}));var b=c(8),_=c.n(b),h=c(2);const m=p.a.bind(_.a),{REACT_APP_DOMAIN:x}=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DOMAIN:"einland.is/tictactoe"}),v=({id:e,onClick:t,children:c,checked:r})=>{const o=Object(n.useCallback)((()=>{t(e)}),[e,t]),a=m({item:!0,checked:r,[c]:c});return Object(h.jsx)("span",{className:a,onClick:o})},f=e=>e===O.Ex?"\u2717":"\u2756",k=(e,t,c)=>{let n=!1;return e.forEach((e=>{e.every((e=>t[e-1].checked===c))&&(n=e)})),n},C=(e,t)=>e?t===O.Ex?O.Circle:O.Ex:t;var E,y=Object(l.f)((({match:e})=>{const[t,c]=Object(n.useState)(new Array(9).fill(null).map(((e,t)=>({id:t+1,checked:null})))),[r,o]=Object(n.useState)(O.Ex),a=Object(n.useRef)(O.Ex),[i,s]=Object(n.useState)([0,0,0]),[l,d]=Object(n.useState)(!1),[p,u]=Object(n.useState)(!0),[b,E]=Object(n.useState)(),[y,g]=Object(n.useState)(),S=Object(n.useRef)(),w=Object(n.useRef)(),N=Object(n.useCallback)(((e,t)=>{const c=C(t,a.current),n=k([[1,2,3],[4,5,6],[7,8,9]],e,c),r=k([[1,4,7],[2,5,8],[3,6,9]],e,c),o=k([[1,5,9],[3,5,7]],e,c);n instanceof Array&&(s(n),d(c)),r instanceof Array&&(s(r),d(c)),o instanceof Array&&(s(o),d(c))}),[]),T=Object(n.useCallback)(((e,n=!1)=>{const r=[...t];if(!t[e-1].checked&&!l&&p&&(r[e-1].checked=C(n,a.current),N(r,n),c(r),!n)){if(!w.current)throw Error("Could not send move to peer");w.current.send({selected:e}),u(!1)}}),[N,t,l,p]),D=Object(n.useCallback)(((e,t,c)=>{if(!S.current)throw Error("Could not make a peer connection");if(w.current=S.current.connect(e),g(e),console.log("make peer connection",w.current),!w.current)throw Error("Could not open a peer connection");w.current.on("open",(()=>{var e;null===(e=w.current)||void 0===e||e.send({startGame:!0,id:t,player:c})}))}),[]);Object(n.useEffect)((()=>{console.log(e),S.current=new j.a,S.current.on("open",(t=>{E(t),e.params.playerId&&!y&&D(e.params.playerId,t,r)})),S.current.on("connection",(e=>{e.on("open",(()=>{e.on("data",(e=>{if(console.log("on connection",e),e.id&&e.startGame&&D(e.id),e.id&&e.startGame){const t=e.player===O.Ex?O.Circle:O.Ex;return o(t),g(e.id),u(!1),void(a.current=t)}e.selected&&(console.log("set remote selection and set turn as true \n"),T(e.selected,!0),u(!0))}))}))}))}),[]);const I=Object(n.useCallback)((e=>{e.target.select(),document.execCommand("copy")}),[]),P=b&&A.root.replace(":playerId?",b),R=m({game:!0,disabled:!y});return Object(h.jsxs)("div",{children:[!l&&Object(h.jsxs)("div",{className:_.a.player,children:["Player: ",Object(h.jsx)("span",{className:_.a.icon,children:f(a.current)})]}),l&&Object(h.jsxs)("div",{className:_.a["game-over"],children:["Game Over, winner is ",Object(h.jsx)("span",{className:_.a.icon,children:f(l)})]}),Object(h.jsx)("div",{className:R,children:t.map((({id:e,checked:t})=>Object(h.jsx)(v,{onClick:T,id:e,checked:i.includes(e),children:t||""},e)))}),!y&&!e.params.playerId&&Object(h.jsx)("div",{className:_.a.invite,children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Share with a friend to start playing"}),b&&Object(h.jsx)("input",{onClick:I,readOnly:!0,value:`${window.location.protocol}//${x}/#${P}`}),Object(h.jsxs)("p",{children:[window.location.protocol,"//",x,"/#",P]})]})})]})}));!function(e){e.root="root"}(E||(E={}));var A={root:"/:playerId?"};var g={root:{path:A.root,page:y}};var S=()=>Object(h.jsx)(s.a,{children:Object(h.jsx)(l.c,{children:Object.keys(g).map((e=>{const t=g[e];return Object(h.jsx)(l.a,{exact:!0,path:t.path,component:t.page},e)}))})});a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root")),i()},8:function(e,t,c){e.exports={game:"App_game__3gwdi",disabled:"App_disabled__yJtTF",item:"App_item__16P43",x:"App_x__17nIi",o:"App_o__3UHLk",checked:"App_checked__28F2E","player-id":"App_player-id__XnNDY",player:"App_player__emS81","game-over":"App_game-over__MaRuD",icon:"App_icon__1T5rY",invite:"App_invite__3i5KG"}}},[[32,1,2]]]);
//# sourceMappingURL=main.3bb859b3.chunk.js.map