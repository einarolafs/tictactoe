(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t){function c(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}c.keys=function(){return[]},c.resolve=c,e.exports=c,c.id=25},32:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),a=c(16),o=c.n(a);c(24);var i=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,33)).then((({getCLS:t,getFID:c,getFCP:n,getLCP:r,getTTFB:a})=>{t(e),c(e),n(e),r(e),a(e)}))},s=c(19),l=c(2),d=c(10),u=c.n(d),j=c(17),b=c.n(j);let O;!function(e){e.Ex="x",e.Circle="o"}(O||(O={}));var p=c(7),_=c.n(p),m=c(1);const h=u.a.bind(_.a),x=({id:e,onClick:t,children:c,checked:r})=>{const a=Object(n.useCallback)((()=>{t(e)}),[e,t]),o=h({item:!0,checked:r,[c]:c});return Object(m.jsx)("span",{className:o,onClick:a})},v=e=>e===O.Ex?"\u2717":"\u2756",f=(e,t,c)=>{for(const n of e){if(n.every((e=>t[e-1].checked===c)))return n}return null},y=(e,t)=>e?t===O.Ex?O.Circle:O.Ex:t,C=[[1,2,3],[4,5,6],[7,8,9]],k=[[1,4,7],[2,5,8],[3,6,9]],E=[[1,5,9],[3,5,7]],{REACT_APP_DOMAIN:S}=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DOMAIN:"einland.is/tictactoe"});var g=({playerId:e})=>{const t=Object(n.useCallback)((e=>{e.target.select(),document.execCommand("copy")}),[]),c=e&&A.root.replace(":playerId?",e);return Object(m.jsx)("div",{className:_.a.invite,children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Share with a friend to start playing"}),e&&Object(m.jsx)("input",{onClick:t,readOnly:!0,value:`${window.location.protocol}//${S}/#${c}`}),Object(m.jsxs)("p",{children:[window.location.protocol,"//",S,"/#",c]})]})})};const G=u.a.bind(_.a);var w=Object(l.f)((({match:e})=>{const[t,c]=Object(n.useState)(new Array(9).fill(null).map(((e,t)=>({id:t+1,checked:null})))),[r,a]=Object(n.useState)(O.Ex),o=Object(n.useRef)(O.Ex),[i,s]=Object(n.useState)([0,0,0]),[l,d]=Object(n.useState)(!1),[u,j]=Object(n.useState)(!0),[p,h]=Object(n.useState)(),[S,w]=Object(n.useState)(),N=Object(n.useRef)(),T=Object(n.useRef)(),A=Object(n.useCallback)(((e,t)=>{const c=y(t,o.current),n=f(C,e,c),r=f(k,e,c),a=f(E,e,c);n instanceof Array&&(s(n),d(c)),r instanceof Array&&(s(r),d(c)),a instanceof Array&&(s(a),d(c))}),[]),I=Object(n.useCallback)(((e,n=!1)=>{const r=[...t];if(!t[e-1].checked&&!l&&u&&(r[e-1].checked=y(n,o.current),A(r,n),c(r),!n)){if(!T.current)throw Error("Could not send move to peer");T.current.send({selected:e}),j(!1)}}),[A,t,l,u]),R=Object(n.useCallback)(((e,t,c)=>{if(!N.current)throw Error("Could not make a peer connection");if(T.current=N.current.connect(e),w(e),!T.current)throw Error("Could not open a peer connection");T.current.on("open",(()=>{var e;null===(e=T.current)||void 0===e||e.send({startGame:!0,id:t,player:c})}))}),[]);Object(n.useEffect)((()=>{N.current=new b.a,N.current.on("open",(t=>{h(t),e.params.playerId&&!S&&R(e.params.playerId,t,r)})),N.current.on("connection",(e=>{e.on("open",(()=>{e.on("data",(e=>{if(e.id&&e.startGame&&R(e.id),e.id&&e.startGame){const t=e.player===O.Ex?O.Circle:O.Ex;return a(t),w(e.id),j(!1),void(o.current=t)}e.selected&&(I(e.selected,!0),j(!0))}))}))}))}),[]);const F=G({game:!0,disabled:!S});return Object(m.jsxs)("div",{children:[!l&&Object(m.jsxs)("div",{className:_.a.player,children:["Player: ",Object(m.jsx)("span",{className:_.a.icon,children:v(o.current)})]}),l&&Object(m.jsxs)("div",{className:_.a["game-over"],children:["Game Over, winner is ",Object(m.jsx)("span",{className:_.a.icon,children:v(l)})]}),Object(m.jsx)("div",{className:F,children:t.map((({id:e,checked:t})=>Object(m.jsx)(x,{onClick:I,id:e,checked:i.includes(e),children:t||""},e)))}),!S&&!e.params.playerId&&p&&Object(m.jsx)(g,{playerId:p})]})}));var N,T=()=>Object(m.jsx)(w,{});!function(e){e.root="root"}(N||(N={}));var A={root:"/:playerId?"};var I={root:{path:A.root,page:T}};var R=()=>Object(m.jsx)(s.a,{children:Object(m.jsx)(l.c,{children:Object.keys(I).map((e=>{const t=I[e];return Object(m.jsx)(l.a,{exact:!0,path:t.path,component:t.page},e)}))})});o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(R,{})}),document.getElementById("root")),i()},7:function(e,t,c){e.exports={game:"Game_game__3xRzo",disabled:"Game_disabled__35kWx",item:"Game_item__1Vt30",x:"Game_x__1rol7",o:"Game_o__2uUGt",checked:"Game_checked__Qj9NT","player-id":"Game_player-id__2Kf5F",player:"Game_player__SRFBJ","game-over":"Game_game-over__1LQQ1",icon:"Game_icon__1i3Hy",invite:"Game_invite__35FQJ"}}},[[32,1,2]]]);
//# sourceMappingURL=main.89225db0.chunk.js.map